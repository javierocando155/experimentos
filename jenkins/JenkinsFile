node('jenkins-slave') {
    
    stage('Git') {
        git credentialsId: 'jejejej', url: 'git@github.com:javierocando155/prueba.git', branch: 'main'
    }
    stage('Build Docker Image') {

        sh(script: """
            echo "hello"
           cd ./golang
           
           docker build -t test .
        """)
    }
    stage('Kubernetes Deploy') {

        withKubeConfig([credentialsId: '0806010c-3741-4078-95bd-1c5be8b1cf9b', serverUrl: 'https://kubernetes.default:443']) {
            sh 'kubectl get pods'
        }
    }
}